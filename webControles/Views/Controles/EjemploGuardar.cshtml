<div id="content">
    <div class="panel panel-default">
        <div class="panel-heading">Ejemplo Guardar</div>
        <div class="panel-body">
            <div id="divBusqueda" class="row">
                <div class="col-xs-12 col-md-12">
                    <div id="divVistaPrevia"></div>
                </div>
                <div class="col-xs-12 col-md-12">

                    <input type="button" value="Guardar" class="btn btn-success" id="btnGuardar" />
                </div>
            </div>
        </div>
    </div>
</div>



@section css {
    <link href="~/Scripts/Common/Dx/Content/dx.common.css" rel="stylesheet" />
    <link href="~/Scripts/Common/Dx/Content/dx.light.css" rel="stylesheet" />
}




@section Scripts {

    <script src="~/Scripts/Controllers/paginaController.js"></script>
    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Scripts/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/Scripts/Plugin/bootstrap-treeview/bootstrap-treeview.js"></script>
    <script src="~/Scripts/Controllers/mensajeController.js"></script>
    <script src="~/Scripts/Services/arbolService.js"></script>
    <script src="~/Scripts/Controllers/arbolController.js"></script>
    <script src="~/Scripts/Services/formulariosService.js"></script>
    <script src="~/Scripts/Controllers/formulariosController.js"></script>
    <script src="~/Scripts/Services/seccionService.js"></script>
    <script src="~/Scripts/Controllers/seccionController.js"></script>
    <script src="~/Scripts/Common/selectCommon.js"></script>



    <link rel="stylesheet" href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.min.css" />
    <script type="text/javascript" src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
    <link href="~/Scripts/Plugin/nestedSortable/jquery.dataTables.min.css" rel="stylesheet" />
    <script src="~/Scripts/Plugin/nestedSortable/jquery.dataTables.min.js"></script>
    <script src="~/Scripts/Plugin/nestedSortable/jquery.mjs.nestedSortable.js"></script>

    <script src="~/Scripts/Services/seccionControlService.js"></script>
    <script src="~/Scripts/Controllers/seccionControlController.js"></script>


    <script src="~/Scripts/Common/Dx/Scripts/globalize.min.js"></script>
    <script src="~/Scripts/Common/Dx/Scripts/dx.all.min.js"></script>
    <script src="~/Scripts/Common/Nz/nzControl.js"></script>
    <script src="~/Scripts/Common/Nz/nzControl.devextreme.js"></script>

    <script>


        $(document)
            .ready(function() {
                var varId = '@ViewContext.RouteData.Values["id"]';

                $('#TablaLoad').show();
                $('#divVistaPrevia')
                    .nzControl({
                        Action: 'http://localhost:64632/Api/',
                        //UUID: '8333c324-087d-49d1-83ce-40da37f22a5d',
//                        UUID: '3f4f45ff-8b27-4ab3-82c6-becf834ce6fd',
//                        UUID: '3f4f45ff-8b27-4ab3-82c6-becf834ce6fd',
                        UUID: 'a65ba1f0-21cf-40c0-9040-c5deabaa844f',
                        Complete: function() {
                            $('#TablaLoad').hide();
                        }
                    });

                $(document)
                    .on("click",
                        "#btnGuardar",
                        function(event) {
                            $('#divVistaPrevia')
                                .nzControl("Save",
                                    function (data) {
                                        /*data contiene: 
                                            MsgError: donde trae el mensaje de success o error (data.MsgError)
                                            Id: donde contiene el Id del registro guardado (data.Id)
                                        */
                                        console.log(data);
                                        alert("CallBack: " + data.MsgError);
                                    }
                                );
                        });
            });


    </script>
}
